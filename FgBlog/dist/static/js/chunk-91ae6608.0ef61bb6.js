(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91ae6608"],{"0560":function(t,e,a){"use strict";var n=a("88d4"),i=a("34cd").find,c=a("d421"),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),n({target:"Array",proto:!0,forced:s},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),c(o)},"2cc0":function(t,e,a){"use strict";a.r(e);for(var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.columns?a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",pagination:{pageSize:15},scroll:{x:1500,y:400}},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var n=e.setSelectedKeys,i=e.selectedKeys,c=e.confirm,o=e.clearFilters,s=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Search "+s.dataIndex,value:i[0]},on:{change:function(t){return n(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(i,c,s.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(i,c,s.dataIndex)}}},[t._v(" Search ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(o)}}},[t._v(" Reset ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,n,i,c){return[t.searchText&&t.searchedColumn===c.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,n){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:n,staticClass:"highlight"},[t._v(t._s(e+""))]):[t._v(t._s(e+""))]]}))],2):[t._v(" "+t._s(e)+" ")]]}},t._l(t.colList,(function(e){return{key:e,fn:function(n,i){return[a("div",{key:e},[i.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,i.key,e)}}}):[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"operation",fn:function(e,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return t.save(n.key)}}},[t._v("Save")]),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(n.key)}}},[a("a",[t._v("Cancel")])])],1):a("span",[a("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(n.key)}}},[t._v("Edit")])])])]}}],null,!0)}):t._e()},i=[],c=a("ebb4"),o=a("045d"),s=a("597f"),r=(a("51b3"),a("8ea3"),a("0560"),a("89a8"),a("1a91"),a("1bab")),u=[],d=0;d<100;d++)u.push({key:d,name:"Edrward ".concat(d),age:32,address:"London Park no. ".concat(d)});var l={props:{tableType:{type:String},newSwitch:{type:Number}},data:function(){return this.cacheData=u.map((function(t){return Object(s["a"])({},t)})),{data:u,columns:void 0,editingKey:"",colList:[],isNewing:!1}},methods:{handleChange:function(t,e,a){var n=Object(o["a"])(this.data),i=n.find((function(t){return e===t.key}));i&&(i[a]=t,this.data=n)},edit:function(t){var e=Object(o["a"])(this.data),a=e.find((function(e){return t===e.key}));this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(o["a"])(this.data),a=Object(o["a"])(this.cacheData),n=e.find((function(e){return t===e.key})),i=a.find((function(e){return t===e.key}));n&&i&&(delete n.editable,this.data=e,Object.assign(i,n),this.cacheData=a),this.$emit("save",e,this.editingKey),this.editingKey="",this.cacheData=this.data.map((function(t){return Object(s["a"])({},t)})),this.isNewing?this.createCommon():this.updateCommon(t)},cancel:function(t){var e=Object(o["a"])(this.data),a=e.find((function(e){return t===e.key}));if(this.editingKey="",a&&(Object.assign(a,this.cacheData.find((function(e){return t===e.key}))),delete a.editable,this.data=e),this.isNewing){this.isNewing=!1;var n=Object(o["a"])(this.data);n.remove(0),this.data=n}},getColumns:function(){var t=this;r["a"]({url:this.getBaseUrl()+"get_columns/",method:"post",data:{tableType:this.tableType}}).then((function(e){t.columns=e.data.columns,t.columns.forEach((function(e){t.colList.push(e.dataIndex)})),console.log(t.colList)})).catch((function(t){console.log(t)}))},getData:function(){var t=this;r["a"]({url:this.getBaseUrl()+"get_common_data/",method:"post",data:{tableType:this.tableType,filterRegion:this.$cookies.get("region"),filterNickname:this.$cookies.get("nickname")}}).then((function(e){t.data=e.data.tableData,t.cacheData=t.data.map((function(t){return Object(s["a"])({},t)}))})).catch((function(t){console.log(t)}))},handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},handleReset:function(t){t(),this.searchText=""},updateCommon:function(t){var e,a=Object(c["a"])(this.data);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.key===t&&r["a"]({url:this.getBaseUrl()+"update_common_info/",method:"post",data:{tableType:this.tableType,data:n}}).then((function(t){!0===t.data.status?console.log(t):alert("保存失败，"+t.data.msg)})).catch((function(t){alert(t),console.log(t)}))}}catch(i){a.e(i)}finally{a.f()}},createCommon:function(){r["a"]({url:this.getBaseUrl()+"create_common_info/",method:"post",data:{tableType:this.tableType,data:this.data[0]}}).then((function(t){!0===t.data.status?console.log(t):alert("保存失败，"+t.data.msg)})).catch((function(t){console.log(t)}))}},created:function(){this.getColumns(),this.getData()},watch:{newSwitch:{handler:function(){this.isNewing=!0;for(var t=0;t<this.data.length;t++)this.data[t].key+=1;this.data.unshift({key:0}),this.cacheData=this.data.map((function(t){return Object(s["a"])({},t)}));var e=Object(o["a"])(this.data),a=e.find((function(t){return 0===t.key}));this.editingKey=0,a&&(a.editable=!0,this.data=e)}}}},h=l,f=(a("8b5d"),a("cba8")),p=Object(f["a"])(h,n,i,!1,null,"4b82fa2c",null);e["default"]=p.exports},"8b5d":function(t,e,a){"use strict";a("beeb")},beeb:function(t,e,a){}}]);
//# sourceMappingURL=chunk-91ae6608.0ef61bb6.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57751b7e"],{3546:function(t,e,a){"use strict";a("ea12")},"4b0e":function(t,e,a){},"4b4a":function(t,e,a){},"5cd2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix"},[a("h2",{staticClass:"typeChoiceTitle"},[t._v(t._s(t.batchTypeName)+"-批量导入")]),a("div",{staticClass:"fileDownload"},[t.isDisabled?a("p",{staticStyle:{color:"red"}},[t._v("请选择下载模版")]):t._e(),a("a-button",{attrs:{disabled:t.isDisabled},on:{click:t.downloadModel}},[t._v("下载"+t._s(t.fileName))])],1),a("a-upload",{staticClass:"fileChoice",attrs:{fileList:t.fileList,remove:t.handleRemove,beforeUpload:t.beforeUpload}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),t._v(" 选择导入文件 ")],1)],1),a("a-button",{staticStyle:{position:"absolute",bottom:"50px",right:"170px"},attrs:{type:"primary",disabled:0===t.fileList.length,loading:t.uploading},on:{click:t.handleUpload}},[t._v(" "+t._s(t.uploading?"Uploading":"Start Upload")+" ")]),a("a-button",{staticClass:"batchInCancel",on:{click:t.close}},[t._v("取消")])],1)},o=[],i=a("045d"),s=(a("acc0a"),a("993f"),a("b3d9"),a("1bab")),c={props:{batchType:{type:String}},data:function(){return{fileList:[],uploading:!1,excelType:"ApplicantInfo",fileName:"",filePath:"",isDisabled:!0,batchTypeName:""}},methods:{handleChange:function(t){this.isDisabled=!1,this.excelType="".concat(t),"ApplicantInfo"===t?(this.fileName="候选人模版.xlsx",this.batchTypeName="候选人"):"ProjectInfo"===t?(this.fileName="项目信息模版.xlsx",this.batchTypeName="项目信息"):"ProjectStatusInfo"===t?(this.fileName="项目满足度模版.xlsx",this.batchTypeName="项目满足度"):"RecruitmentInfo"===t&&(this.fileName="招聘需求模版.xlsx",this.batchTypeName="招聘需求")},handleRemove:function(t){var e=this.fileList.indexOf(t),a=this.fileList.slice();a.splice(e,1),this.fileList=a},beforeUpload:function(t){return this.fileList=[].concat(Object(i["a"])(this.fileList),[t]),!1},handleUpload:function(){var t=this;console.log(this);var e=new FormData;e.append("file",this.fileList[0]),e.append("type",this.excelType),this.uploading=!0;var a={headers:{"Content-Type":"multipart/form-data"}};console.log(a),s["a"]({url:this.getBaseUrl()+"save_excel/",method:"post",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e),alert(e.data.msg),t.uploading=!1})).catch((function(t){console.log(t)}))},downloadModel:function(){window.open(this.filePath+this.fileName)},close:function(){this.$emit("close")}},created:function(){this.handleChange(this.batchType),this.filePath=this.getBaseUrl()+"static/model/"}},r=c,l=(a("d05b"),a("cba8")),d=Object(l["a"])(r,n,o,!1,null,null,null);e["a"]=d.exports},"88e0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h3",{staticStyle:{margin:"20px"}},[t._v(t._s(t.batchTypeName)+"-已生成导出文件")]),a("el-table",{staticStyle:{width:"80%","margin-left":"20px"},attrs:{data:t.fileList,"max-height":"270"}},[a("el-table-column",{attrs:{fixed:"",prop:"name",label:"文件名称",width:"500px"}}),a("el-table-column",{attrs:{fixed:"",prop:"msg",label:"大小",width:"300px"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.downLoad(e.$index,t.fileList)}}},[t._v(" 下载 ")])]}}])})],1),a("a-button",{staticClass:"batchOutButtom",on:{click:t.newDownloadExcel}},[t._v("导出新文件")]),a("a-button",{staticClass:"batchOutCancel",on:{click:t.close}},[t._v("取消")])],1)},o=[],i=a("1bab"),s={props:{batchType:{type:String}},data:function(){return{fileList:[],batchTypeName:""}},methods:{getFileList:function(){var t=this;console.log(this),i["a"]({url:this.getBaseUrl()+"get_file_list/",method:"post",data:{batchType:this.batchType},headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.fileList=e.data.fileList})).catch((function(t){console.log(t)}))},newDownloadExcel:function(){var t=this;console.log(this),i["a"]({url:this.getBaseUrl()+"new_download_excel/",method:"post",data:{batchType:this.batchType},headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t.fileList.unshift(e.data.fileInfo)})).catch((function(t){console.log(t)}))},downLoad:function(t,e){window.open(this.baseUrl+e[t].path)},close:function(){this.$emit("close")},handleChange:function(t){"ApplicantInfo"===t?this.batchTypeName="候选人":"ProjectInfo"===t?this.batchTypeName="项目信息":"ProjectStatusInfo"===t?this.batchTypeName="项目满足度":"RecruitmentInfo"===t&&(this.batchTypeName="招聘需求")}},created:function(){this.baseUrl=this.getBaseUrl(),this.getFileList(),this.handleChange(this.batchType)}},c=s,r=(a("b72d"),a("cba8")),l=Object(r["a"])(c,n,o,!1,null,null,null);e["a"]=l.exports},"993f":function(t,e,a){"use strict";var n=a("88d4"),o=a("8735"),i=a("1c34"),s=a("58db"),c=a("126a"),r=a("ac3c"),l=a("492f"),d=a("c40a"),u=a("3a6d"),h=u("splice"),f=o.TypeError,p=Math.max,m=Math.min,b=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h},{splice:function(t,e){var a,n,o,u,h,y,v=r(this),x=c(v),_=i(t,x),w=arguments.length;if(0===w?a=n=0:1===w?(a=0,n=x-_):(a=w-2,n=m(p(s(e),0),x-_)),x+a-n>b)throw f(g);for(o=l(v,n),u=0;u<n;u++)h=_+u,h in v&&d(o,u,v[h]);if(o.length=n,a<n){for(u=_;u<x-n;u++)h=u+n,y=u+a,h in v?v[y]=v[h]:delete v[y];for(u=x;u>x-n+a;u--)delete v[u-1]}else if(a>n)for(u=x-n;u>_;u--)h=u+n-1,y=u+a-1,h in v?v[y]=v[h]:delete v[y];for(u=0;u<a;u++)v[u+_]=arguments[u+2];return v.length=x-n+a,o}})},ab88:function(t,e,a){"use strict";a.r(e);for(var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isBatchControl||t.isBatchControl2,expression:"isBatchControl || isBatchControl2"}],staticClass:"maskLayer",on:{click:t.close}}),a("batch-input",{directives:[{name:"show",rawName:"v-show",value:t.isBatchControl,expression:"isBatchControl"}],staticClass:"newApplicant",attrs:{batchType:"ProjectStatusInfo"},on:{close:t.close}}),a("batch-output",{directives:[{name:"show",rawName:"v-show",value:t.isBatchControl2,expression:"isBatchControl2"}],staticClass:"newApplicant",attrs:{batchType:"ProjectStatusInfo"},on:{close:t.close}}),a("a-table",{attrs:{columns:t.columns,"data-source":t.data,bordered:"",pagination:{pageSize:15},scroll:{x:1500,y:550}},scopedSlots:t._u([{key:"filterDropdown",fn:function(e){var n=e.setSelectedKeys,o=e.selectedKeys,i=e.confirm,s=e.clearFilters,c=e.column;return a("div",{staticStyle:{padding:"8px"}},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => (searchInput = c)"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"Search "+c.dataIndex,value:o[0]},on:{change:function(t){return n(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(o,i,c.dataIndex)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(o,i,c.dataIndex)}}},[t._v(" Search ")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(s)}}},[t._v(" Reset ")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}},{key:"customRender",fn:function(e,n,o,i){return[t.searchText&&t.searchedColumn===i.dataIndex?a("span",[t._l(e.toString().split(new RegExp("(?<="+t.searchText+")|(?="+t.searchText+")","i")),(function(e,n){return[e.toLowerCase()===t.searchText.toLowerCase()?a("mark",{key:n,staticClass:"highlight"},[t._v(t._s(e))]):[t._v(t._s(e))]]}))],2):[t._v(" "+t._s(e)+" ")]]}},t._l(["sow_num","project_num","new_project_num","offset_num","monthly_target","urgency","monthly_reach","project_satisfaction","project_num_all","remarks","monthly_target_reach"],(function(e){return{key:e,fn:function(n,o){return[a("div",{key:e},[o.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,o.key,e)}}}):[t._v(" "+t._s(n)+" ")]],2)]}}})),{key:"operation",fn:function(e,n){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return t.save(n.key)}}},[t._v("Save")]),a("a-popconfirm",{attrs:{title:"Sure to cancel?"},on:{confirm:function(){return t.cancel(n.key)}}},[a("a",[t._v("Cancel")])])],1):a("span",[a("a",{attrs:{disabled:""!==t.editingKey},on:{click:function(){return t.edit(n.key)}}},[t._v("Edit")])])])]}}],null,!0)})],1)},o=[],i=a("ebb4"),s=a("045d"),c=a("597f"),r=(a("89a8"),a("d5ee"),a("51b3"),a("8ea3"),a("5a05"),a("5cd2")),l=a("88e0"),d=a("1bab"),u=[{title:"日期",dataIndex:"date",width:200,scopedSlots:{customRender:"date"}},{title:"部门",dataIndex:"department",width:250,scopedSlots:{customRender:"department"}},{title:"PDU",dataIndex:"pdu",width:100,scopedSlots:{customRender:"pdu"}},{title:"项目",dataIndex:"project",width:100,scopedSlots:{customRender:"project"}},{title:"地域",dataIndex:"region",width:250,scopedSlots:{customRender:"region"}},{title:"sow人力",dataIndex:"sow_num",width:100,scopedSlots:{customRender:"sow_num"}},{title:"当前项目组人数",dataIndex:"project_num",width:200,scopedSlots:{customRender:"project_num"}},{title:"需求满足度",dataIndex:"project_satisfaction",width:200,scopedSlots:{customRender:"project_satisfaction"}},{title:"剩余需求总数",dataIndex:"project_num_all",width:200,scopedSlots:{customRender:"project_num_all"}},{title:"新增需求",dataIndex:"new_project_num",width:100,scopedSlots:{customRender:"new_project_num"}},{title:"离补需求",dataIndex:"offset_num",width:200,scopedSlots:{customRender:"offset_num"}},{title:"月度目标数",dataIndex:"monthly_target",width:150,scopedSlots:{customRender:"monthly_target"}},{title:"需求紧急程度",dataIndex:"urgency",width:150,scopedSlots:{customRender:"urgency"}},{title:"月度满足数",dataIndex:"monthly_reach",width:150,scopedSlots:{customRender:"monthly_reach"}},{title:"目标达成",dataIndex:"monthly_target_reach",width:150,scopedSlots:{customRender:"monthly_target_reach"}},{title:"备注",dataIndex:"remarks",width:150,scopedSlots:{customRender:"remarks"}},{title:"operation",dataIndex:"operation",fixed:"right",scopedSlots:{customRender:"operation"},width:130}],h=[],f=0;f<100;f++)h.push({key:f.toString(),name:"Edrward ".concat(f),age:32,address:"London Park no. ".concat(f),job:"Ed".concat(f)});var p={components:{BatchInput:r["a"],BatchOutput:l["a"]},props:{BatchNum:{type:Number}},data:function(){return this.cacheData=h.map((function(t){return Object(c["a"])({},t)})),{data:h,columns:u,editingKey:"",isNewApplicant:!1,userName:"",searchText:"",searchInput:null,searchedColumn:"",isBatchControl:!1,isBatchControl2:!1}},methods:{handleChange:function(t,e,a){var n=Object(s["a"])(this.data),o=n.filter((function(t){return e===t.key}))[0];o&&(o[a]=t,this.data=n)},edit:function(t){var e=Object(s["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey=t,a&&(a.editable=!0,this.data=e)},save:function(t){var e=Object(s["a"])(this.data),a=Object(s["a"])(this.cacheData),n=e.filter((function(e){return t===e.key}))[0],o=a.filter((function(e){return t===e.key}))[0];n&&o&&(delete n.editable,this.data=e,Object.assign(o,n),this.cacheData=a),this.editingKey="",this.updateProjectStatusInfo(t)},cancel:function(t){var e=Object(s["a"])(this.data),a=e.filter((function(e){return t===e.key}))[0];this.editingKey="",a&&(Object.assign(a,this.cacheData.filter((function(e){return t===e.key}))[0]),delete a.editable,this.data=e)},handleSearch:function(t,e,a){e(),this.searchText=t[0],this.searchedColumn=a},log:function(){console.log(this.searchedColumn),console.log(this.searchInput),console.log(this.searchText)},handleReset:function(t){t(),this.searchText=""},editApplicant:function(){this.isNewApplicant=!this.isNewApplicant},updateProjectStatusInfo:function(t){var e,a={},n=Object(i["a"])(this.data);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.key===t&&(a=o)}}catch(s){n.e(s)}finally{n.f()}d["a"]({url:this.getBaseUrl()+"update_project_status/",method:"post",data:{data:a}}).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},getProjectStatusInfo:function(){var t=this;d["a"]({url:this.getBaseUrl()+"get_project_status_info/",method:"post",data:{filterData:this.filterData,filterRegion:this.$cookies.get("region")}}).then((function(e){var a=e.data.infoList;t.data.length=0;for(var n=0;n<a.length;n++)console.log(a[n]),t.data.push(a[n]);t.cacheData=h.map((function(t){return Object(c["a"])({},t)}))})).catch((function(t){console.log(t)}))},close:function(){this.isBatchControl=!1,this.isBatchControl2=!1}},created:function(){this.getProjectStatusInfo()},watch:{BatchNum:{handler:function(t,e){console.log(t),console.log(e),t>e&&(this.isBatchControl=!0),e>t&&(this.isBatchControl2=!0)}},cleanNum:{handler:function(t,e){console.log(t),console.log(e),this.isBatchControl=!0}}}},m=p,b=(a("3546"),a("cba8")),g=Object(b["a"])(m,n,o,!1,null,"1abf0a50",null);e["default"]=g.exports},b3d9:function(t,e,a){"use strict";var n=a("88d4"),o=a("8735"),i=a("9ad2"),s=a("b595"),c=a("bf1f"),r=a("ac3c"),l=a("126a"),d=a("c40a"),u=a("492f"),h=a("3a6d"),f=a("d0ff"),p=a("0116"),m=f("isConcatSpreadable"),b=9007199254740991,g="Maximum allowed index exceeded",y=o.TypeError,v=p>=51||!i((function(){var t=[];return t[m]=!1,t.concat()[0]!==t})),x=h("concat"),_=function(t){if(!c(t))return!1;var e=t[m];return void 0!==e?!!e:s(t)},w=!v||!x;n({target:"Array",proto:!0,forced:w},{concat:function(t){var e,a,n,o,i,s=r(this),c=u(s,0),h=0;for(e=-1,n=arguments.length;e<n;e++)if(i=-1===e?s:arguments[e],_(i)){if(o=l(i),h+o>b)throw y(g);for(a=0;a<o;a++,h++)a in i&&d(c,h,i[a])}else{if(h>=b)throw y(g);d(c,h++,i)}return c.length=h,c}})},b72d:function(t,e,a){"use strict";a("4b0e")},d05b:function(t,e,a){"use strict";a("4b4a")},d5ee:function(t,e,a){"use strict";var n=a("ce5b"),o=a("5e68").PROPER,i=a("ef11"),s=a("25ef"),c=a("a7b6"),r=a("3ffc"),l=a("9ad2"),d=a("23f2"),u="toString",h=RegExp.prototype,f=h[u],p=n(d),m=l((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),b=o&&f.name!=u;(m||b)&&i(RegExp.prototype,u,(function(){var t=s(this),e=r(t.source),a=t.flags,n=r(void 0===a&&c(h,t)&&!("flags"in h)?p(t):a);return"/"+e+"/"+n}),{unsafe:!0})},ea12:function(t,e,a){},ebb4:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));a("304d"),a("f257"),a("89a8"),a("2478"),a("b110"),a("fe35"),a("8fec");var n=a("9135");function o(t,e){var a="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=Object(n["a"])(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,r=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return c=t.done,t},e:function(t){r=!0,s=t},f:function(){try{c||null==a["return"]||a["return"]()}finally{if(r)throw s}}}}}}]);
//# sourceMappingURL=chunk-57751b7e.e18a1efe.js.map